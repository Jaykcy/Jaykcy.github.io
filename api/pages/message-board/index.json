{"title":"Docker简介与使用","uid":"bc171f1c49460aaf0acdc749b74f4a7f","text":"Docker镜像相关命令1.搜索镜像docker search java 2.下载镜像docker pull java:8 --指定版本 docker pull nginx --下载最新版本 3.列出镜像docker images 以上列表含义如下 - REPOSITORY：镜像...","date":"2021-11-24T10:00:00.000Z","updated":"2021-11-24T09:22:31.081Z","comments":true,"path":"api/pages/message-board/index.json","covers":"https://cover.png","excerpt":"","content":"<h2 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h2><h4 id=\"镜像相关命令\"><a href=\"#镜像相关命令\" class=\"headerlink\" title=\"镜像相关命令\"></a>镜像相关命令</h4><h5 id=\"1-搜索镜像\"><a href=\"#1-搜索镜像\" class=\"headerlink\" title=\"1.搜索镜像\"></a>1.搜索镜像</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker search java <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"2-下载镜像\"><a href=\"#2-下载镜像\" class=\"headerlink\" title=\"2.下载镜像\"></a>2.下载镜像</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker pull java:8  --指定版本\ndocker pull nginx   --下载最新版本<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h5 id=\"3-列出镜像\"><a href=\"#3-列出镜像\" class=\"headerlink\" title=\"3.列出镜像\"></a>3.列出镜像</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker images<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"C:\\Users\\Jaykcy\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210722104955374.png\" alt=\"image-20210722104955374\">   </p>\n<p>以上列表含义如下</p>\n<p>- REPOSITORY：镜像所属仓库名称。</p>\n<p>- TAG:镜像标签。默认是 latest,表示最新。</p>\n<p>- IMAGE ID：镜像 ID，表示镜像唯一标识。</p>\n<p>- CREATED：镜像创建时间。</p>\n<p>- SIZE: 镜像大小。</p>\n<h5 id=\"4-删除本地镜像\"><a href=\"#4-删除本地镜像\" class=\"headerlink\" title=\"4.删除本地镜像\"></a>4.删除本地镜像</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">删除指定镜像\ndocker rmi java    --强制删除加 -f\n删除所有镜像：\ndocker rmi $(docker images -q)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"容器相关命令\"><a href=\"#容器相关命令\" class=\"headerlink\" title=\"容器相关命令\"></a>容器相关命令</h4><h5 id=\"1-新建并启动容器\"><a href=\"#1-新建并启动容器\" class=\"headerlink\" title=\"1.新建并启动容器\"></a>1.新建并启动容器</h5><p><strong>–注意：创建容器时，会先检查本地是否存在指定镜像。如果本地不存在该名称的镜像， Docker就会自动从 Docker Hub下载镜像并启动一个 Docker容器。</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">docker run\n\n-d选项：表示后台运行\n-P选项：随机端口映射\n-p选项：指定端口映射，有以下四种格式。 \n\t-- ip:hostPort:containerPort \n\t-- ip::containerPort\n\t-- hostPort:containerPort \n\t-- containerPort\n--net选项：指定网络模式，该选项有以下可选参数：\n\t--net&#x3D;bridge:默认选项，表示连接到默认的网桥。\n\t--net&#x3D;host:容器使用宿主机的网络。\n\t--net&#x3D;container:NAME-or-ID：告诉 Docker让新建的容器使用已有容器的网络配置。\n\t--net&#x3D;none：不配置该容器的网络，用户可自定义网络配置。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">示例：\ndocker run -d -p 91:80 nginx\n\t-d 后台运行\n\t-p 宿主机端口:容器端口 #开放容器端口到宿主机端口\t\n访问地址：http:&#x2F;&#x2F;ip:91<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h5 id=\"2-列出容器\"><a href=\"#2-列出容器\" class=\"headerlink\" title=\"2.列出容器\"></a>2.列出容器</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker ps  [-a:列出所有容器，包括已停止的]<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"C:\\Users\\Jaykcy\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210722104917297.png\" alt=\"image-20210722104917297\"></p>\n<p>- CONTAINER_ID：表示容器 ID。</p>\n<p>- IMAGE:表示镜像名称。</p>\n<p>- COMMAND：表示启动容器时运行的命令。</p>\n<p>- CREATED：表示容器的创建时间。 </p>\n<p>- STATUS：表示容器运行的状态。UP表示运行中， Exited表示已停止。 </p>\n<p>- PORTS:表示容器对外的端口号。 </p>\n<p>- NAMES:表示容器名称。该名称默认由 Docker自动生成，也可使用 docker run命令的–name选项自行指定。</p>\n<h5 id=\"3-停止容器\"><a href=\"#3-停止容器\" class=\"headerlink\" title=\"3.停止容器\"></a>3.停止容器</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker stop 097c3ecc6f6e（容器ID）<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"4-强制停止容器\"><a href=\"#4-强制停止容器\" class=\"headerlink\" title=\"4.强制停止容器\"></a>4.强制停止容器</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker kill 097c3ecc6f6e<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"5-启动已停止的容器\"><a href=\"#5-启动已停止的容器\" class=\"headerlink\" title=\"5.启动已停止的容器\"></a>5.启动已停止的容器</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker start 097c3ecc6f6e<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"6-查看容器所有信息\"><a href=\"#6-查看容器所有信息\" class=\"headerlink\" title=\"6.查看容器所有信息\"></a>6.查看容器所有信息</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker inspect 097c3ecc6f6e<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"7-查看容器日志\"><a href=\"#7-查看容器日志\" class=\"headerlink\" title=\"7.查看容器日志\"></a>7.查看容器日志</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker container logs 097c3ecc6f6e<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"8-查看容器里的进程\"><a href=\"#8-查看容器里的进程\" class=\"headerlink\" title=\"8.查看容器里的进程\"></a>8.查看容器里的进程</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker top 097c3ecc6f6e<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"9-容器与宿主机之间复制文件\"><a href=\"#9-容器与宿主机之间复制文件\" class=\"headerlink\" title=\"9.容器与宿主机之间复制文件\"></a>9.容器与宿主机之间复制文件</h5><h6 id=\"容器到宿主机\"><a href=\"#容器到宿主机\" class=\"headerlink\" title=\"容器到宿主机\"></a>容器到宿主机</h6><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker cp 容器id:要拷贝的文件在容器里面的路径  宿主机的相应路径 \n\n示例：\n\ndocker cp 097c3ecc6f6e:&#x2F;etc&#x2F;nginx&#x2F;nginx.conf <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h6 id=\"宿主机到容器\"><a href=\"#宿主机到容器\" class=\"headerlink\" title=\"宿主机到容器\"></a>宿主机到容器</h6><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker cp 要拷贝的宿主机文件路径 容器id:要拷贝到容器里面对应的路径<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h5 id=\"10-进入退出容器\"><a href=\"#10-进入退出容器\" class=\"headerlink\" title=\"10.进入退出容器\"></a>10.进入退出容器</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker exec -it 097c3ecc6f6e &#x2F;bin&#x2F;bash  (有的容器需要把 &#x2F;bin&#x2F;bash 换成 sh)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"C:\\Users\\Jaykcy\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210722112709339.png\" alt=\"image-20210722112709339\"></p>\n<h5 id=\"11-容器内安装vim、ping、ifconfig\"><a href=\"#11-容器内安装vim、ping、ifconfig\" class=\"headerlink\" title=\"11.容器内安装vim、ping、ifconfig\"></a>11.容器内安装vim、ping、ifconfig</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">apt-get update\napt-get install vim           #安装vim\napt-get install iputils-ping  #安装ping\napt-get install net-tools     #安装ifconfig <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h5 id=\"12-删除容器\"><a href=\"#12-删除容器\" class=\"headerlink\" title=\"12.删除容器\"></a>12.删除容器</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker rm 097c3ecc6f6e   --该命令只能删除已停止的容器  删除正在运行的容器，可使用-f参数\ndocker rm -f $(docker ps -a -q)   --强制删除所有容器<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h5 id=\"13-查看容器资源使用情况的指令\"><a href=\"#13-查看容器资源使用情况的指令\" class=\"headerlink\" title=\"13.查看容器资源使用情况的指令\"></a>13.查看容器资源使用情况的指令</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">docker stats  # 返回容器资源的实时使用情况，1秒刷新一次\ndocker stats --no-stream  # 返回容器当时的资源使用情况<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p><img src=\"C:\\Users\\Jaykcy\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210722115940126.png\" alt=\"image-20210722115940126\"></p>\n<p>[CONTAINER]：以短格式显示容器的 ID。</p>\n<p>[CPU %]：CPU 的使用情况。</p>\n<p>[MEM USAGE / LIMIT]：当前使用的内存和最大可以使用的内存。</p>\n<p>[MEM %]：以百分比的形式显示内存使用情况。</p>\n<p>[NET I/O]：网络 I/O 数据。</p>\n<p>[BLOCK I/O]：磁盘 I/O 数据。 </p>\n<p>[PIDS]：PID 号。</p>\n<h2 id=\"Docker-Compose\"><a href=\"#Docker-Compose\" class=\"headerlink\" title=\"Docker Compose\"></a><strong>Docker Compose</strong></h2><h4 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h4><p>使用微服务架构的应用系统一般包含若干个微服务，每个微服务一般都会部署多个实例。如果每个微服务都要手动启停，那么效率之低、维护量之大可想而知。本节课将讨论如何使用 Docker Compose来轻松、高效地管理容器。为了简单起见将 Docker Compose简称为 Compose。</p>\n<p>Compose 是一个用于定义和运行多容器的Docker应用的工具。使用Compose，你可以在一个配置文件（yaml格式）中配置你应用的服务，然后使用一个命令，即可创建并启动配置中引用的所有服务。下面我们进入Compose的实战吧</p>\n","count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Docker\"><span class=\"toc-text\">Docker</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%95%9C%E5%83%8F%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">镜像相关命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">1.搜索镜像</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">2.下载镜像</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-%E5%88%97%E5%87%BA%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">3.列出镜像</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-%E5%88%A0%E9%99%A4%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.删除本地镜像</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">容器相关命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-%E6%96%B0%E5%BB%BA%E5%B9%B6%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">1.新建并启动容器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-%E5%88%97%E5%87%BA%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">2.列出容器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">3.停止容器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-%E5%BC%BA%E5%88%B6%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">4.强制停止容器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-%E5%90%AF%E5%8A%A8%E5%B7%B2%E5%81%9C%E6%AD%A2%E7%9A%84%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">5.启动已停止的容器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">6.查看容器所有信息</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">7.查看容器日志</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E9%87%8C%E7%9A%84%E8%BF%9B%E7%A8%8B\"><span class=\"toc-text\">8.查看容器里的进程</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E4%B9%8B%E9%97%B4%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">9.容器与宿主机之间复制文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E5%AE%B9%E5%99%A8%E5%88%B0%E5%AE%BF%E4%B8%BB%E6%9C%BA\"><span class=\"toc-text\">容器到宿主机</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E5%AE%BF%E4%B8%BB%E6%9C%BA%E5%88%B0%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">宿主机到容器</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-%E8%BF%9B%E5%85%A5%E9%80%80%E5%87%BA%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">10.进入退出容器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-%E5%AE%B9%E5%99%A8%E5%86%85%E5%AE%89%E8%A3%85vim%E3%80%81ping%E3%80%81ifconfig\"><span class=\"toc-text\">11.容器内安装vim、ping、ifconfig</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">12.删除容器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#13-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5%E7%9A%84%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">13.查看容器资源使用情况的指令</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Docker-Compose\"><span class=\"toc-text\">Docker Compose</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">介绍</span></a></li></ol></li></ol></li></ol>"}